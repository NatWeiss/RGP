<!DOCTYPE html>

<html>
<head>
  <title>AdsMobFox.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <h1>AdsMobFox.js</h1>
        

        
          <div class="toc">
            <h3>Table of Contents</h3>
            <ol>
              
                
                <li>
                  <a class="source" href="README.html">
                    README.md
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="App.html">
                    App.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Config.html">
                    Config.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="ConfigServer.html">
                    ConfigServer.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="HelloJavascript.html">
                    HelloJavascript.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Loader.html">
                    Loader.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="SceneHello.html">
                    SceneHello.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="AdsMobFox.html">
                    AdsMobFox.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Facebook.html">
                    Facebook.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Server.html">
                    Server.js
                  </a>
                </li>
              
            </ol>
          </div>
        
      </div>

      
        
        
        
      
        
        <p>Implements the MobFox advertisements plugin for HTML5 clients. Native clients will supercede this by having already defined <code>plugin.AdsMobFox</code> (see <code>src/mobfox</code>).</p>
<p>Conforms to the <code>InterfaceAds</code> protocol. Loaded by <code>pluginx</code>.</p>
<p>Uses the module pattern. The object <code>module</code> will contain all private variables used by the plugin. Public methods will be returned by the module and accessible via the <code>plugin.AdsMobFox</code> constructor.</p>

        
          <div class='highlight'><pre><span class="hljs-keyword">var</span> plugin = plugin || {};</pre></div>
        
      
        
        <h3 id="adstype">AdsType</h3>
<p>Types of advertisements to be dislayed.</p>

        
          <div class='highlight'><pre>plugin.AdsType = {
	BannerAd: <span class="hljs-number">0</span>,
	FullScreenAd: <span class="hljs-number">1</span>
};</pre></div>
        
      
        
        <h3 id="adspos">AdsPos</h3>
<p>Positions for advertisements to be dislayed.</p>

        
          <div class='highlight'><pre>plugin.AdsPos = {
	Center: <span class="hljs-number">0</span>,
	Top: <span class="hljs-number">1</span>,
	TopLeft: <span class="hljs-number">2</span>,
	TopRight: <span class="hljs-number">3</span>,
	Bottom: <span class="hljs-number">4</span>,
	BottomLeft: <span class="hljs-number">5</span>,
	BottomRight: <span class="hljs-number">6</span>
};</pre></div>
        
      
        
        <h3 id="module">module</h3>
<p>Begin the module pattern.</p>

        
          <div class='highlight'><pre><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> plugin.AdsMobFox === <span class="hljs-string">"undefined"</span>) {

	plugin.AdsMobFox = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
		<span class="hljs-keyword">var</span> logPrefix = <span class="hljs-string">"MobFox: "</span>,
			module = {
				devInfo: {},
				debug: <span class="hljs-literal">false</span>,
				layer: <span class="hljs-literal">null</span>,
				adUrl: <span class="hljs-string">""</span>,
				geoData: <span class="hljs-literal">null</span>,
				doShowAds: <span class="hljs-literal">null</span>
			};</pre></div>
        
      
        
        <h3 id="module-log">module.log</h3>
<p>Logs the given message to the console if the module has debug mode enabled. Log messages are prefixed with the module’s <code>logPrefix</code>.</p>

        
          <div class='highlight'><pre>		module.log = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(msg)</span> {</span>
			<span class="hljs-keyword">if</span> (module.debug) {
				cc.log(logPrefix + msg);
			}
		};</pre></div>
        
      
        
        <h3 id="module-getipaddress">module.getIPAddress</h3>
<p>Requests and stores the client’s IP address and geo data.</p>

        
          <div class='highlight'><pre>		module.getIPAddress = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			App.requestUrl(<span class="hljs-string">"http://api.hostip.info/get_json.php?position=true"</span>,
				<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(response, status)</span>{</span>
					<span class="hljs-keyword">if</span> (!response || !response.length) {
						module.log(<span class="hljs-string">"Couldn't get client's IP address, status: "</span>	+ status);
						<span class="hljs-keyword">return</span>;
					}
					<span class="hljs-keyword">try</span> {
						module.geoData = <span class="hljs-built_in">JSON</span>.parse(response);
						module.log(<span class="hljs-string">"Client's IP address: "</span> + module.geoData.ip);
						<span class="hljs-keyword">if</span> (module.doShowAds) {
							module.showAds(module.doShowAds);
						}
					} <span class="hljs-keyword">catch</span>(e) {
						module.log(<span class="hljs-string">""</span> + e);
					}
				}
			);
		};</pre></div>
        
      
        
        <h3 id="module-showads">module.showAds</h3>
<p>Shows an advertisement given the info object. Uses <a href="http://www.cocos2d-x.org/forums/19/topics/38739">corsproxy.com</a> to prevent browser warnings.</p>

        
          <div class='highlight'><pre>		module.showAds = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(infoObj)</span> {</span>
			<span class="hljs-keyword">var</span> i,
				tries = <span class="hljs-number">0</span>,
				typeEnum = infoObj[<span class="hljs-string">"type"</span>] || <span class="hljs-number">0</span>,
				sizeEnum = infoObj[<span class="hljs-string">"size"</span>] || <span class="hljs-number">0</span>,
				posEnum = infoObj[<span class="hljs-string">"position"</span>] || <span class="hljs-number">0</span>,
				uuid = App.getUUID(),
				requestUrl,
				responseHandler;
		
			<span class="hljs-comment">/* Wait until client geo data is full. */</span>
			<span class="hljs-keyword">if</span> (module.geoData === <span class="hljs-literal">null</span>) {
				module.log(<span class="hljs-string">"Client IP data not full, waiting..."</span>);
				module.doShowAds = App.clone(infoObj);
				<span class="hljs-keyword">return</span>;
			}
			module.doShowAds = <span class="hljs-literal">null</span>;

			<span class="hljs-comment">/* Remove any existing ad. */</span>
			module.hideAds();
			
			<span class="hljs-comment">/* Proceed with showing ad. */</span>
			<span class="hljs-keyword">var</span> params,
				url,
				isFullscreen = (typeEnum === plugin.AdsType.FullScreenAd),
				urlBase = <span class="hljs-string">"http://my.mobfox.com/"</span> + (isFullscreen ? <span class="hljs-string">"v"</span> : <span class="hljs-string">""</span>) +
					<span class="hljs-string">"request.php"</span>;
			
			<span class="hljs-keyword">if</span> (isFullscreen) {
				params = {
					<span class="hljs-string">"sdk"</span>: <span class="hljs-string">"vad"</span>,
					<span class="hljs-string">"c.mraid"</span>: <span class="hljs-number">0</span>,
					<span class="hljs-string">"o_iosadvidlimit"</span>: <span class="hljs-number">0</span>,
					<span class="hljs-string">"u"</span>: <span class="hljs-string">"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0_3 like Mac OS X) "</span> +
						<span class="hljs-string">"AppleWebKit/537.51.1 (KHTML, like Gecko) Mobile/11B508"</span>,
					<span class="hljs-string">"u_wv"</span>: <span class="hljs-string">"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0_3 like Mac OS X) "</span> +
						<span class="hljs-string">"AppleWebKit/537.51.1 (KHTML, like Gecko) Mobile/11B508"</span>,
					<span class="hljs-string">"u_br"</span>: <span class="hljs-string">"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0_3 like Mac OS X) "</span> +
						<span class="hljs-string">"AppleWebKit/537.51.1 (KHTML, like Gecko) Version/unknown "</span> +
						<span class="hljs-string">"Mobile/11B508 Safari/unknown"</span>,
					<span class="hljs-string">"v"</span>: <span class="hljs-string">"5.0.0"</span>,
					<span class="hljs-string">"s"</span>: module.devInfo.apiKey,
					<span class="hljs-string">"iphone_osversion"</span>: <span class="hljs-string">"7.0.3"</span>,
					<span class="hljs-string">"o_iosadvid"</span>: <span class="hljs-string">"ABCDEF01-2345-6789-ABCD-EF0123456789"</span>,
					<span class="hljs-string">"rt"</span>: <span class="hljs-string">"iphone_app"</span>,
					<span class="hljs-string">"i"</span>: module.geoData.ip
				};
			} <span class="hljs-keyword">else</span> {
				params = {
					rt: <span class="hljs-string">"api"</span>,
					s: module.devInfo.apiKey,
					i: module.geoData.ip,
					p: window.location,
					m: module.devInfo.mode,
					c_mraid: <span class="hljs-number">1</span>,
					o: uuid,
					v: <span class="hljs-string">"2.0"</span>,
					u: navigator.userAgent,
					no_markup: <span class="hljs-number">1</span>,
					allow_mr: <span class="hljs-number">1</span>,
					longitude: module.geoData.lng,
					latitude: module.geoData.lat,
					<span class="hljs-string">"adspace.width"</span>: <span class="hljs-built_in">parseInt</span>(App.winSize.width),
					<span class="hljs-string">"adspace.height"</span>: (App.winSize.width &gt;= <span class="hljs-number">1024</span> ? <span class="hljs-number">90</span> : <span class="hljs-number">50</span>)
				};
			}
			
			<span class="hljs-comment">/* Ad requester. */</span>
			requestUrl = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				url = App.insert(urlBase, <span class="hljs-string">"://"</span>, <span class="hljs-string">"www.corsproxy.com/"</span>);
				<span class="hljs-keyword">if</span> (isFullscreen) {
					params[<span class="hljs-string">"t"</span>] = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-built_in">Date</span>.now() / <span class="hljs-number">1000</span>).toFixed(<span class="hljs-number">6</span>);
				}
				url += App.encodeURIComponents(params);
				App.requestUrl(url, responseHandler);
			};

			<span class="hljs-comment">/* Ad response handler. */</span>
			responseHandler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(adResponse, adStatus)</span> {</span>
				<span class="hljs-keyword">var</span> html = adResponse,
					start = <span class="hljs-number">0</span>,
					newStart,
					imageHtml,
					imageCount = <span class="hljs-number">0</span>,
					imageUrl;

				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> adResponse === <span class="hljs-string">"undefined"</span>) {
					module.log(<span class="hljs-string">"Error retrieving ad data, status: "</span> + adStatus);
					<span class="hljs-keyword">return</span>;
				}
				module.adUrl = App.between(html, <span class="hljs-string">"href=\""</span>, <span class="hljs-string">"\""</span>);
				<span class="hljs-keyword">if</span> (!module.adUrl.length) {
					module.adUrl = App.between(html, <span class="hljs-string">"href='"</span>, <span class="hljs-string">"'"</span>);
				}
				start = module.adUrl.indexOf(<span class="hljs-string">"http"</span>);
				<span class="hljs-keyword">if</span> (start &gt; <span class="hljs-number">0</span>) {
					module.adUrl = module.adUrl.substr(start);
				}
				start = <span class="hljs-number">0</span>;
				module.log(<span class="hljs-string">"Ad response: "</span> + html);
				<span class="hljs-keyword">if</span> (!module.adUrl.length) {
					tries += <span class="hljs-number">1</span>;
					<span class="hljs-keyword">if</span> (tries &lt; <span class="hljs-number">3</span>) {
						i = App.rand(<span class="hljs-number">150</span>) + <span class="hljs-number">150</span>;
						cc.log(<span class="hljs-string">"No response "</span> + tries +
							<span class="hljs-string">", waiting "</span> + i + <span class="hljs-string">" and trying again"</span>);
						setTimeout(requestUrl, i);
						<span class="hljs-keyword">return</span>;
					}
				}
				module.log(<span class="hljs-string">"Ad URL:"</span> + module.adUrl);

				<span class="hljs-keyword">do</span> {
					newStart = html.indexOf(<span class="hljs-string">"&lt;img "</span>, start);
					<span class="hljs-comment">/*module.log("Start " + start + " new start " + newStart);*/</span>
					<span class="hljs-keyword">if</span> (newStart &lt;= start) {
						<span class="hljs-keyword">break</span>;
					}
					start = newStart;

					imageHtml = App.between(html, <span class="hljs-string">"&lt;img"</span>, <span class="hljs-string">"&gt;"</span>, start);
					<span class="hljs-comment">/*module.log("Image html " + imageHtml);*/</span>
					start += <span class="hljs-number">1</span>;
					
					imageUrl = App.between(imageHtml, <span class="hljs-string">"src=\""</span>, <span class="hljs-string">"\""</span>);
					<span class="hljs-keyword">if</span> (!imageUrl.length) {
						imageUrl = App.between(imageHtml, <span class="hljs-string">"src='"</span>, <span class="hljs-string">"'"</span>);
						<span class="hljs-keyword">if</span> (!imageUrl.length) {
							<span class="hljs-keyword">break</span>;
						}
					}
					imageCount++;
					imageUrl = App.insert(imageUrl, <span class="hljs-string">"://"</span>, <span class="hljs-string">"www.corsproxy.com/"</span>);
					module.log(<span class="hljs-string">"Image "</span> + imageCount + <span class="hljs-string">": "</span> +
						(imageUrl.length &gt; <span class="hljs-number">128</span> ?
							imageUrl.substr(<span class="hljs-number">0</span>,<span class="hljs-number">128</span>) + <span class="hljs-string">"..."</span> :
							imageUrl
						)
					);
					<span class="hljs-keyword">if</span> (imageCount &gt; <span class="hljs-number">10</span>) {
						<span class="hljs-keyword">break</span>;
					}
					
					App.loadImage(imageUrl, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(url)</span> {</span>
						module.showImage(url, typeEnum, sizeEnum, posEnum);
					});
				} <span class="hljs-keyword">while</span>(imageUrl.length);
				
				<span class="hljs-keyword">if</span> (imageCount == <span class="hljs-number">0</span>) {
					module.log(<span class="hljs-string">"No images found"</span>);
					App.callRunningLayer(<span class="hljs-string">"onAdDismissed"</span>, <span class="hljs-literal">false</span>);
				}
			};
			requestUrl();
		};</pre></div>
        
      
        
        <h3 id="module-showimage">module.showImage</h3>
<p>Displays the given advertisement image URL with given parameters.</p>

        
          <div class='highlight'><pre>		module.showImage = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(imageUrl, typeEnum, sizeEnum, posEnum)</span> {</span>
			<span class="hljs-keyword">var</span> texture,
				sprite,
				scene,
				menu,
				closeButton = <span class="hljs-literal">null</span>,
				normalSprite,
				selectedSprite,
				disabledSprite,
				lower = imageUrl.toLowerCase(),
				isImage = (lower.indexOf(<span class="hljs-string">".gif"</span>) &gt; <span class="hljs-number">0</span>
					|| lower.indexOf(<span class="hljs-string">".jpg"</span>) &gt; <span class="hljs-number">0</span>
					|| lower.indexOf(<span class="hljs-string">".png"</span>) &gt; <span class="hljs-number">0</span>);
			
			<span class="hljs-comment">/* Check the texture. */</span>
			texture = cc.textureCache.textureForKey(imageUrl);
			<span class="hljs-keyword">if</span> (!isImage || !texture || texture.getContentSize().width &lt; <span class="hljs-number">10</span>) {
				<span class="hljs-comment">/*module.log("Not showing image: " + imageUrl.substr(0,128));*/</span>
				<span class="hljs-keyword">return</span>;
			}
			
			<span class="hljs-comment">/* Create layer and sprite. */</span>
			module.layer = cc.Layer.create();
			sprite = cc.MenuItemImage.create(
				imageUrl,
				imageUrl,
				<span class="hljs-literal">null</span>,
				module.clickAdCallback,
				module
			);
			<span class="hljs-keyword">if</span> (texture.getContentSize().height &gt; <span class="hljs-number">0</span>) {
				sprite.scale = App.winSize.height / texture.getContentSize().height;
			}
			
			<span class="hljs-comment">/* Set sprite position. */</span>
			<span class="hljs-keyword">if</span> (posEnum === plugin.AdsPos.Center) {
				sprite.setPosition(App.winSize.width * <span class="hljs-number">.5</span>, App.winSize.height * <span class="hljs-number">.5</span>);
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posEnum === plugin.AdsPos.Top) {
				sprite.setAnchorPoint(cc.p(<span class="hljs-number">.5</span>, <span class="hljs-number">1</span>));
				sprite.setPosition(App.winSize.width * <span class="hljs-number">.5</span>, App.winSize.height);
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posEnum === plugin.AdsPos.TopLeft) {
				sprite.setAnchorPoint(cc.p(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>));
				sprite.setPosition(<span class="hljs-number">0</span>, App.winSize.height);
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posEnum === plugin.AdsPos.TopRight) {
				sprite.setAnchorPoint(cc.p(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
				sprite.setPosition(App.winSize.width, App.winSize.height);
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posEnum === plugin.AdsPos.Bottom) {
				sprite.setAnchorPoint(cc.p(<span class="hljs-number">.5</span>, <span class="hljs-number">0</span>));
				sprite.setPosition(App.winSize.width * <span class="hljs-number">.5</span>, <span class="hljs-number">0</span>);
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posEnum === plugin.AdsPos.BottomLeft) {
				sprite.setAnchorPoint(cc.p(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
				sprite.setPosition(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posEnum === plugin.AdsPos.BottomRight) {
				sprite.setAnchorPoint(cc.p(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>));
				sprite.setPosition(App.winSize.width, <span class="hljs-number">0</span>);
			}
			
			<span class="hljs-comment">/* Close button for fullscreen ad. */</span>
			<span class="hljs-keyword">if</span> (typeEnum == plugin.AdsType.FullScreenAd) {
				normalSprite = cc.Sprite.create(<span class="hljs-string">"#CloseButton.png"</span>);
				selectedSprite = cc.Sprite.create(<span class="hljs-string">"#CloseButton.png"</span>);
				disabledSprite = cc.Sprite.create(<span class="hljs-string">"#CloseButton.png"</span>);
				<span class="hljs-keyword">if</span> (normalSprite &amp;&amp; selectedSprite) {
					selectedSprite.setColor(cc.color(<span class="hljs-number">128</span>,<span class="hljs-number">128</span>,<span class="hljs-number">128</span>));
					closeButton = cc.MenuItemSprite.create(
						normalSprite,
						selectedSprite,
						disabledSprite,
						module.closeAdCallback,
						module
					);
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-comment">/*var label = ...;
					closeButton = cc.MenuItemLabel.create(
						label,
						module.closeAdCallback,
						module
					);*/</span>
				}
				<span class="hljs-keyword">if</span> (closeButton) {
					closeButton.setAnchorPoint(cc.p(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>));
					closeButton.x = sprite.x + (sprite.width * <span class="hljs-number">.5</span> * sprite.scale);
					closeButton.y = sprite.y + (sprite.height * <span class="hljs-number">.5</span> * sprite.scale);
					closeButton.y -= App.winSize.height;
					closeButton.runAction(cc.EaseOut.create(
						cc.MoveBy.create(<span class="hljs-number">0.5</span>, cc.p(<span class="hljs-number">0</span>, App.winSize.height)),
						<span class="hljs-number">3.0</span>)
					);

					<span class="hljs-comment">/* Make the content size of the clickable image smaller than
					the close button so they don't conflict. (Because of a bug in
					cocos2d-html5 that prevents the top-most menu item from
					being clicked.) */</span>
					<span class="hljs-keyword">var</span> w = closeButton.width / sprite.scale;
					<span class="hljs-keyword">var</span> size = sprite.getContentSize();
					sprite.setContentSize(size.width - w, size.height);
					sprite.x -= w * <span class="hljs-number">.5</span>;
				}
			}

			<span class="hljs-comment">/* Run an action. */</span>
			sprite.y -= App.winSize.height;
			sprite.runAction(cc.EaseOut.create(
				cc.MoveBy.create(<span class="hljs-number">0.5</span>, cc.p(<span class="hljs-number">0</span>, App.winSize.height)),
				<span class="hljs-number">3.0</span>)
			);

			<span class="hljs-comment">/* Create the menu. */</span>
			menu = cc.Menu.create();
			menu.addChild(sprite);
			<span class="hljs-keyword">if</span> (closeButton) {
				menu.addChild(closeButton, <span class="hljs-number">1</span>);
			}
			menu.setPosition(cc.p());

			<span class="hljs-comment">/* Add children. */</span>
			module.layer.addChild(menu);
			scene = cc.director.getRunningScene()
			<span class="hljs-keyword">if</span> (scene) {
				scene.addChild(module.layer, <span class="hljs-number">1000</span>);
			}
		};</pre></div>
        
      
        
        <h3 id="module-hideads">module.hideAds</h3>
<p>Hides the current advertisement. Safe to be called if there is no advertisement.</p>

        
          <div class='highlight'><pre>		module.hideAds = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> (module.layer) {
				module.log(<span class="hljs-string">"Hiding ads, layer: "</span> + module.layer);
				
				module.layer.stopAllActions();
				module.layer.runAction(cc.Sequence.create(
					cc.EaseIn.create(
						cc.MoveBy.create(<span class="hljs-number">0.5</span>, cc.p(<span class="hljs-number">0</span>, -App.winSize.height)),
						<span class="hljs-number">3.0</span>),
					cc.RemoveSelf(<span class="hljs-literal">true</span>)
				));
				module.layer = <span class="hljs-literal">null</span>;
			}
		};</pre></div>
        
      
        
        <h3 id="module-clickadcallback">module.clickAdCallback</h3>
<p>Callback used when the advertisement is clicked.</p>

        
          <div class='highlight'><pre>		module.clickAdCallback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(menuItem)</span> {</span>
			module.log(<span class="hljs-string">"Clicked ad, visiting: "</span> + module.adUrl);
			<span class="hljs-keyword">if</span> (App.isFullscreenEnabled()) {
				App.enableFullscreen(<span class="hljs-literal">false</span>);
			}
			<span class="hljs-keyword">if</span> (module.adUrl.length) {
				cc.openURL(module.adUrl);
			}
			module.closeAdCallback();
		};</pre></div>
        
      
        
        <h3 id="module-closeadcallback">module.closeAdCallback</h3>
<p>Callback used when the advertisement is closed.</p>

        
          <div class='highlight'><pre>		module.closeAdCallback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(menuItem)</span> {</span>
			module.hideAds();
			App.callRunningLayer(<span class="hljs-string">"onAdDismissed"</span>);
		};</pre></div>
        
      
        
        <h3 id="public-methods">Public Methods</h3>
<p>Here begins the public methods accessible via creating a new <code>plugin.AdsMobFox</code>.</p>

        
          <div class='highlight'><pre>		<span class="hljs-keyword">return</span> cc.Class.extend({
		
			init: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
			},</pre></div>
        
      
        
        <h3 id="adsmobfox-configdeveloperinfo">AdsMobFox.configDeveloperInfo</h3>
<p>Configures the plugin with the given developer info object.</p>

        
          <div class='highlight'><pre>			configDeveloperInfo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(devInfo)</span> {</span>
				module.devInfo = devInfo;
				module.getIPAddress();
				module.log(<span class="hljs-string">"Set API key to: "</span> + module.devInfo.apiKey);
			},</pre></div>
        
      
        
        <h3 id="adsmobfox-showads">AdsMobFox.showAds</h3>
<p>Shows an advertisement given the info object. Properties of the info object are <code>type</code>, <code>size</code> and <code>position</code> which are all enums. See <code>plugin.AdsType</code> and <code>plugin.AdsPos</code>.</p>

        
          <div class='highlight'><pre>			showAds: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(infoObj)</span> {</span>
				module.showAds(infoObj);
			},</pre></div>
        
      
        
        <h3 id="adsmobfox-hideads">AdsMobFox.hideAds</h3>
<p>Hides the current advertisement. Safe to be called even if there is no advertisement.</p>

        
          <div class='highlight'><pre>			hideAds: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(infoObj)</span> {</span>
				module.hideAds();
			},</pre></div>
        
      
        
        <h3 id="adsmobfox-querypoints">AdsMobFox.queryPoints</h3>
<p>Unused.</p>

        
          <div class='highlight'><pre>			queryPoints: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				module.log(<span class="hljs-string">"Has no points API"</span>);
			},</pre></div>
        
      
        
        <h3 id="adsmobfox-spendpoints">AdsMobFox.spendPoints</h3>
<p>Unused.</p>

        
          <div class='highlight'><pre>			spendPoints: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(points)</span> {</span>
				module.log(<span class="hljs-string">"Has no points API"</span>);
			},</pre></div>
        
      
        
        <h3 id="adsmobfox-setdebugmode">AdsMobFox.setDebugMode</h3>
<p>Enables or disables debug mode. In debug mode, messages are logged to the console.</p>

        
          <div class='highlight'><pre>			setDebugMode: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(debug)</span> {</span>
				module.debug = (debug ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>);
			},</pre></div>
        
      
        
        <h3 id="adsmobfox-getsdkversion">AdsMobFox.getSDKVersion</h3>
<p>Returns the SDK version.</p>

        
          <div class='highlight'><pre>			getSDKVersion: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> <span class="hljs-string">"unknown"</span>;
			},</pre></div>
        
      
        
        <h3 id="adsmobfox-getpluginversion">AdsMobFox.getPluginVersion</h3>
<p>Returns the plugin version.</p>

        
          <div class='highlight'><pre>			getPluginVersion: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> plugin.Version;
			}

		}); <span class="hljs-comment">// end cc.Class extend</span>
	
	}()); <span class="hljs-comment">// end module pattern</span>

} <span class="hljs-comment">// end if undefined</span></pre></div>
        
      

        
          <div>
            <h4>Table of Contents</h4>
            <ol>
              
                
                <li>
                  <a class="source" href="README.html">
                    README.md
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="App.html">
                    App.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Config.html">
                    Config.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="ConfigServer.html">
                    ConfigServer.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="HelloJavascript.html">
                    HelloJavascript.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Loader.html">
                    Loader.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="SceneHello.html">
                    SceneHello.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="AdsMobFox.html">
                    AdsMobFox.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Facebook.html">
                    Facebook.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Server.html">
                    Server.js
                  </a>
                </li>
              
            </ol>
          </div>
        

      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
