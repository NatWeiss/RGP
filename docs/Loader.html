<!DOCTYPE html>

<html>
<head>
  <title>Loader.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <h1>Loader.js</h1>
        

        
          <div class="toc">
            <h3>Table of Contents</h3>
            <ol>
              
                
                <li>
                  <a class="source" href="README.html">
                    README.md
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="App.html">
                    App.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Config.html">
                    Config.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="ConfigServer.html">
                    ConfigServer.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="HelloJavascript.html">
                    HelloJavascript.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Loader.html">
                    Loader.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="SceneHello.html">
                    SceneHello.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="AdsMobFox.html">
                    AdsMobFox.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Facebook.html">
                    Facebook.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Server.html">
                    Server.js
                  </a>
                </li>
              
            </ol>
          </div>
        
      </div>

      
        
        
        
      
        
        <p>Create a unique loading screen by customizing <code>cc.LoaderScene</code>.</p>
<p>See <code>lib/cocos2d-html5/cocos2d/core/scenes/CCLoaderScene.js</code>.</p>

        
      
        
        <h3 id="cc-loaderscene-init">cc.LoaderScene.init</h3>
<p>Setup the loader scene.</p>

        
          <div class='highlight'><pre>cc.LoaderScene.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
	<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	<span class="hljs-keyword">this</span>._winSize = cc.director.getWinSize();
	
	<span class="hljs-comment">/* Call super's init. */</span>
	cc.Scene.prototype.init.call(<span class="hljs-keyword">this</span>);

	<span class="hljs-comment">/* Start loading the logo texture. */</span>
	cc.loader.loadImg(App.config[<span class="hljs-string">"loader-image"</span>],
		{isCrossOrigin : <span class="hljs-literal">false</span>},
		<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, img)</span>{</span>
			<span class="hljs-keyword">var</span> sizePercent = App.config[<span class="hljs-string">"loader-image-win-size-percent"</span>];

			self._initStage(img, cc.p(self._winSize.width * <span class="hljs-number">.5</span>,
				self._winSize.height * <span class="hljs-number">.6</span>));

			<span class="hljs-keyword">if</span> (sizePercent) {
				self._logo.setScale((self._winSize.height * sizePercent)
					/ self._logo.getContentSize().height);
			}
		}
	);

	<span class="hljs-comment">/* Create background color. */</span>
	<span class="hljs-keyword">this</span>._bgLayer = cc.LayerColor.create(App.config[<span class="hljs-string">"loader-bg-color"</span>]);
	<span class="hljs-keyword">this</span>._bgLayer.setPosition(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
	<span class="hljs-keyword">this</span>.addChild(<span class="hljs-keyword">this</span>._bgLayer, <span class="hljs-number">0</span>);

	<span class="hljs-comment">/* Create label. */</span>
	<span class="hljs-keyword">this</span>._label = cc.LabelTTF.create(
		App.config[<span class="hljs-string">"loader-text"</span>] || <span class="hljs-string">"Loading..."</span>,
		App.config[<span class="hljs-string">"loader-text-font"</span>] || <span class="hljs-string">"Arial"</span>,
		App.config[<span class="hljs-string">"loader-text-size"</span>] || <span class="hljs-number">20</span>
	);
	<span class="hljs-keyword">this</span>._label.setColor(
		App.config[<span class="hljs-string">"loader-text-color"</span>] || cc.color(<span class="hljs-number">180</span>,<span class="hljs-number">180</span>,<span class="hljs-number">180</span>,<span class="hljs-number">255</span>)
	);
	<span class="hljs-keyword">this</span>._label.setPosition(<span class="hljs-keyword">this</span>._winSize.width * <span class="hljs-number">.5</span>, <span class="hljs-keyword">this</span>._winSize.height * <span class="hljs-number">.265</span>);
	<span class="hljs-keyword">this</span>._bgLayer.addChild(<span class="hljs-keyword">this</span>._label, <span class="hljs-number">10</span>);

	<span class="hljs-comment">/* Create loading bar. */</span>
	<span class="hljs-keyword">this</span>._loadingBarSize = cc.size(
		<span class="hljs-keyword">this</span>._winSize.width * <span class="hljs-number">.2</span>,
		<span class="hljs-keyword">this</span>._winSize.height * <span class="hljs-number">.025</span>
	);
	<span class="hljs-keyword">this</span>._loadingBar = cc.LayerColor.create(
		App.config[<span class="hljs-string">"loader-bar-color"</span>] || cc.color(<span class="hljs-number">9</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">255</span>),
		<span class="hljs-keyword">this</span>._loadingBarSize.width,
		<span class="hljs-keyword">this</span>._loadingBarSize.height
	);
	<span class="hljs-keyword">this</span>._loadingBar.setPosition(<span class="hljs-keyword">this</span>._winSize.width * <span class="hljs-number">.4</span>, <span class="hljs-keyword">this</span>._winSize.height * <span class="hljs-number">.2</span>);
	<span class="hljs-keyword">this</span>._loadingBar.setContentSize(<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>._loadingBarSize.height);
	<span class="hljs-keyword">this</span>.addChild(<span class="hljs-keyword">this</span>._loadingBar, <span class="hljs-number">10</span>);
};</pre></div>
        
      
        
        <h3 id="cc-loaderscene-_updatepercent">cc.LoaderScene._updatePercent</h3>
<p>Update the percent loaded animation.</p>

        
          <div class='highlight'><pre>cc.LoaderScene.prototype._updatePercent = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>{</span>
	<span class="hljs-keyword">var</span> percent = <span class="hljs-built_in">Math</span>.min(<span class="hljs-number">100</span>, <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, (<span class="hljs-keyword">this</span>._count / <span class="hljs-keyword">this</span>._length) * <span class="hljs-number">100</span>)),
		width = <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>._loadingBarSize.width * (percent / <span class="hljs-number">100</span>));

	<span class="hljs-comment">/* Set width of loading bar. */</span>
	<span class="hljs-keyword">this</span>._loadingBar.setContentSize(width, <span class="hljs-keyword">this</span>._loadingBarSize.height);

	<span class="hljs-comment">/* Unschedule update. */</span>
	<span class="hljs-keyword">if</span> (percent &gt;= <span class="hljs-number">100</span>) {
		<span class="hljs-keyword">this</span>.unschedule(<span class="hljs-keyword">this</span>._updatePercent);
	}
};</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
